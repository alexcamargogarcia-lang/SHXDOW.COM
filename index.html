<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Chat IA potente con Gemini 3 Pro</title>
  <style>
    body { font-family: Arial; max-width: 800px; margin: 2rem auto; }
    #chat { border: 1px solid #ccc; padding: 1rem; height: 400px; overflow-y: auto; margin-bottom: 1rem; }
    .user { text-align: right; color: navy; }
    .bot  { text-align: left; color: darkgreen; }
    input  { width: 80%; padding: 0.8rem; }
    button { padding: 0.8rem 1.5rem; }
  </style>
</head>
<body>

<h1>Chat con Gemini 3 Pro</h1>
<div id="chat"></div>

<input id="input" placeholder="Pregúntame lo que sea..." autofocus />
<button onclick="enviar()">Enviar</button>

<script type="module">
  import { GoogleGenerativeAI } from "https://esm.run/@google/generative-ai";

  // ¡Cambia esto por TU API KEY!
  const API_KEY = "AIzaSyAZYkYJBYRN7-4JwB03PQgyVelILiT4QRY";  // → https://aistudio.google.com/app/apikey

  const genAI = new GoogleGenerativeAI(API_KEY);
  const model = genAI.getGenerativeModel({
    model: "gemini-3-pro-preview",   // o "gemini-3-pro-latest" si ya está disponible
    // Alternativa más barata y rápida: "gemini-3-flash-preview"
    generationConfig: { temperature: 0.7, maxOutputTokens: 2048 },
    systemInstruction: "Eres un asistente experto, amable y muy preciso. Responde siempre en español."
  });

  const chat = model.startChat({ history: [] });

  const chatDiv = document.getElementById("chat");
  const input   = document.getElementById("input");

  function addMessage(texto, clase) {
    const div = document.createElement("div");
    div.className = clase;
    div.textContent = texto;
    chatDiv.appendChild(div);
    chatDiv.scrollTop = chatDiv.scrollHeight;
  }

  async function enviar() {
    const texto = input.value.trim();
    if (!texto) return;

    addMessage(texto, "user");
    input.value = "";

    try {
      const result = await chat.sendMessage(texto);
      const respuesta = await result.response.text();
      addMessage(respuesta, "bot");
    } catch (err) {
      addMessage("Error: " + err.message, "bot");
      console.error(err);
    }
  }

  input.addEventListener("keypress", e => { if (e.key === "Enter") enviar(); });
</script>
</body>
</html>
